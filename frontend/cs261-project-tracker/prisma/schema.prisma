generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model morale {
  project     BigInt
  u_id        BigInt
  submit_date DateTime @db.Timestamp(6)
  morale      Int
  projects    projects @relation(fields: [project], references: [id], onDelete: NoAction, onUpdate: NoAction)
  users       users    @relation(fields: [u_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@id([project, u_id, submit_date, morale])
}

model project_developers {
  project   BigInt
  u_id      BigInt
  ismanager Boolean?
  projects  projects @relation(fields: [project], references: [id], onDelete: NoAction, onUpdate: NoAction)
  users     users    @relation(fields: [u_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@id([project, u_id])
}

model project_tasks {
  id          BigInt    @id
  project     BigInt?
  name        String?   @db.VarChar(100)
  description String?   @db.VarChar(1000)
  start_date  DateTime? @db.Timestamp(6)
  deadline    DateTime? @db.Timestamp(6)
  end_date    DateTime? @db.Timestamp(6)
  progress    String?   @db.VarChar(100)
  risk        Int?
  projects    projects? @relation(fields: [project], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model projects {
  id                 BigInt               @id
  name               String?              @db.VarChar(100)
  start_date         DateTime?            @db.Timestamp(6)
  deadline           DateTime?            @db.Timestamp(6)
  end_date           DateTime?            @db.Timestamp(6)
  budget             BigInt?
  risk               Int?
  repository_link    String?              @db.VarChar(500)
  morale             morale[]
  project_developers project_developers[]
  project_tasks      project_tasks[]
  user_invites       user_invites[]
}

model user_invites {
  project  BigInt
  u_id     BigInt
  projects projects @relation(fields: [project], references: [id], onDelete: NoAction, onUpdate: NoAction)
  users    users    @relation(fields: [u_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@id([project, u_id])
}

model users {
  id                 BigInt               @id
  forename           String?              @db.VarChar(100)
  surname            String?              @db.VarChar(100)
  email              String?              @db.VarChar(100)
  password           String?              @db.VarChar(100)
  years_experience   Int?
  morale             morale[]
  project_developers project_developers[]
  user_invites       user_invites[]
}
